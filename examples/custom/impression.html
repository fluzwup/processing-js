<!DOCTYPE html>
<html>
<head>
  <script src="../../processing.js"></script>
</head>
<body>

<script type="application/processing">

void setup() 
{
  size(1278, 719);
}

void mousePressed() 
{
  impression();
}

void impression()
{
  PImage a;
  a = loadImage("data/disapproving_cat_is_disapproving.jpg", null, function()
  {
  image(a, 0, 0);
  background(255);
  stroke(255, 0);	// color, alpha

  for(i = 30; i >= 5; i -= 5)
  {	  
  	for(int x = 0; x < 1278; x += i)
	  {
	  	for(int y = 0; y < 719; y += i)
		{
			int ox = Math.random() * 10;
			int oy = Math.random() * 10;
			color c = a.get(x, y);
	  		fill(c, 127 - brightness(c) / 2);	// color, alpha
			int diameter = i + i * saturation(c) / 255;
			ellipse(x + ox, y + oy, diameter, diameter);
		}
	  }
  }
  });
}



</script><canvas width="1500" height="1000"></canvas></p>
<div style="height:0px;width:0px;overflow:hidden;"><img src="data/disapproving_cat_is_disapproving.jpg" id="cat.jpg"/></div>

</body>
</html>
